{% call org_panel("Statement of Financial Activities", org) %}
<p class="measure">
    Statement of financial activities for year ended <strong>{{ format_date(cy.fin_period_end_date) }}</strong>.
</p>
<p class="measure">
    Based on information provided to the Charity Commission for England and Wales in the
    charity's annual return. This may not exactly match the figures and categories supplied in the
    charity's annual accounts.
</p>
<table class="table collapse financial-table">
    <thead>
        <tr>
            <th></th>
            <th class="tr">{{ cy.fin_period_end_date.year }}<br>
                {% if cy_partb.scale == 1000000 %}
                £m
                {% elif cy_partb.scale == 1000 %}
                £000s
                {% else %}
                £
                {% endif %}
            </th>
            <th class="tr">
            {% if py_partb %}{{ py_partb.fin_period_end_date.year }}
            {% elif py %}{{ py.fin_period_end_date.year }}
            {% endif %}<br>
                {% if cy_partb.scale == 1000000 %}
                £m
                {% elif cy_partb.scale == 1000 %}
                £000s
                {% else %}
                £
                {% endif %}
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="bn ttu tl b" colspan="3">Incoming resources</td>
        </tr>
        <tr>
            <td class="pl4 tl i">Donations and other voluntary income</td>
            <td class="i code">{{ cy_partb.income_donations|number_format(cy_partb.scale) }}</td>
            <td class="i code">{% if py_partb %}{{ py_partb.income_donations|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="pl4 tl i">Legacies</td>
            <td class="i code">{{ cy_partb.income_legacies|number_format(cy_partb.scale) }}</td>
            <td class="i code">{% if py_partb %}{{ py_partb.income_legacies|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="pl4 tl i">Endowments</td>
            <td class="i code">{{ cy_partb.income_endowments|number_format(cy_partb.scale) }}</td>
            <td class="i code">{% if py_partb %}{{ py_partb.income_endowments|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl">Donations and legacies</td>
            <td class="code">{{ cy_partb.income_donations_and_legacies|number_format(cy_partb.scale) }}</td>
            <td class="code">{% if py_partb %}{{ py_partb.income_donations_and_legacies|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl">Income from charitable activities</td>
            <td class="code">{{ cy_partb.income_charitable_activities|number_format(cy_partb.scale) }}</td>
            <td class="code">{% if py_partb %}{{ py_partb.income_charitable_activities|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl">Income from other trading activities</td>
            <td class="code">{{ cy_partb.income_other_trading_activities|number_format(cy_partb.scale) }}</td>
            <td class="code">{% if py_partb %}{{ py_partb.income_other_trading_activities|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl">Income from investments</td>
            <td class="code">{{ cy_partb.income_investments|number_format(cy_partb.scale) }}</td>
            <td class="code">{% if py_partb %}{{ py_partb.income_investments|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl">Other income</td>
            <td class="code">{{ cy_partb.income_other|number_format(cy_partb.scale) }}</td>
            <td class="code">{% if py_partb %}{{ py_partb.income_other|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl b">Total</td>
            <td class="b code">{{ cy_partb.income_total_income_and_endowments|number_format(cy_partb.scale) }}</td>
            {% if py_partb %}
            <td class="b code">{{ py_partb.income_total_income_and_endowments|number_format(cy_partb.scale) }}</td>
            {% elif py %}
            <td class="b code">{{ py.total_gross_income|number_format(cy_partb.scale) }}</td>
            {% endif %}
        </tr>
        <tr>
            <td colspan="3"></td>
        </tr>
        <tr>
            <td class="bn ttu tl b" colspan="3">Expenditure</td>
        </tr>
        <tr>
            <td class="pl4 tl i">Investment management</td>
            <td class="i code">{{ cy_partb.expenditure_investment_management|number_format(cy_partb.scale) }}</td>
            <td class="i code">{% if py_partb %}{{ py_partb.expenditure_investment_management|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="pl4 tl i">Other spending on raising funds</td>
            <td class="i code">{{ cy_partb.expenditure_other_raising_funds|number_format(cy_partb.scale) }}</td>
            <td class="i code">{% if py_partb %}{{ py_partb.expenditure_other_raising_funds|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl">Spending on raising funds</td>
            <td class="code">{{ cy_partb.expenditure_raising_funds|number_format(cy_partb.scale) }}</td>
            <td class="code">{% if py_partb %}{{ py_partb.expenditure_raising_funds|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl pl4 i">Grants to institutions</td>
            <td class="i code">{{ cy_partb.expenditure_grants_institution|number_format(cy_partb.scale) }}</td>
            <td class="i code">{% if py_partb %}{{ py_partb.expenditure_grants_institution|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl pl4 i">Other charitable activities</td>
            <td class="i code">{{ cy_partb.expenditure_other_charitable_activities|number_format(cy_partb.scale) }}</td>
            <td class="i code">{% if py_partb %}{{ py_partb.expenditure_other_charitable_activities|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl">Charitable activities</td>
            <td class="code">{{ cy_partb.expenditure_charitable_expenditure|number_format(cy_partb.scale) }}</td>
            <td class="code">{% if py_partb %}{{ py_partb.expenditure_charitable_expenditure|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl">Other spending</td>
            <td class="code">{{ cy_partb.expenditure_other|number_format(cy_partb.scale) }}</td>
            <td class="code">{% if py_partb %}{{ py_partb.expenditure_other|number_format(cy_partb.scale) }}{% endif %}</td>
        </tr>
        <tr>
            <td class="tl b">Total</td>
            <td class="b code">{{ cy_partb.expenditure_total|number_format(cy_partb.scale) }}</td>
            {% if py_partb %}
            <td class="b code">{{ py_partb.expenditure_total|number_format(cy_partb.scale) }}</td>
            {% elif py %}
            <td class="b code">{{ py.total_gross_expenditure|number_format(cy_partb.scale) }}</td>
            {% endif %}
        </tr>
        <tr>
            <td colspan="3"></td>
        </tr>
        <tr>
            <td class="tl ttu b">Net income / (expenditure)</td>
            <td class="b code">{{ (cy_partb.income_total_income_and_endowments - cy_partb.expenditure_total)|number_format(cy_partb.scale) }}</td>
            {% if py_partb %}
            <td class="b code">{{ (py_partb.income_total_income_and_endowments - py_partb.expenditure_total)|number_format(cy_partb.scale) }}</td>
            {% elif py %}
            <td class="b code">{{ (py.total_gross_income - py.total_gross_expenditure)|number_format(cy_partb.scale) }}</td>
            {% endif %}
        </tr>
    </tbody>
</table>
{% endcall %}